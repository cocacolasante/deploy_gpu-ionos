import os
import requests

BASE = "https://api.ionos.com/cloudapi/v6"
DATACENTER_ID = "93d4758f-3fe5-4526-88de-05e558fc03bf"
SERVER_ID = "04e2eb23-524e-42ae-9248-6d4c61d9b001"  # <-- GPU server ID

API_TOKEN_VALUE = "eyJ0eXAiOiJKV1QiLCJraWQiOiJlZjI5OWRiMS1mZDkzLTQ1MmUtYTgzZi1mMDg1Mjg5NzMzZDUiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJBbnRob255IENvbGFzYW50ZSIsImlhdCI6MTc2OTYzMTEzNywiY2xpZW50IjoiVVNFUiIsImlkZW50aXR5Ijp7InByaXZpbGVnZXMiOlsiREFUQV9DRU5URVJfQ1JFQVRFIiwiU05BUFNIT1RfQ1JFQVRFIiwiSVBfQkxPQ0tfUkVTRVJWRSIsIk1BTkFHRV9EQVRBUExBVEZPUk0iLCJBQ0NFU1NfQUNUSVZJVFlfTE9HIiwiUENDX0NSRUFURSIsIkFDQ0VTU19TM19PQkpFQ1RfU1RPUkFHRSIsIkJBQ0tVUF9VTklUX0NSRUFURSIsIkNSRUFURV9JTlRFUk5FVF9BQ0NFU1MiLCJLOFNfQ0xVU1RFUl9DUkVBVEUiLCJGTE9XX0xPR19DUkVBVEUiLCJBQ0NFU1NfQU5EX01BTkFHRV9NT05JVE9SSU5HIiwiQUNDRVNTX0FORF9NQU5BR0VfQ0VSVElGSUNBVEVTIiwiQUNDRVNTX0FORF9NQU5BR0VfTE9HR0lORyIsIk1BTkFHRV9EQkFBUyIsIkFDQ0VTU19BTkRfTUFOQUdFX0ROUyIsIk1BTkFHRV9SRUdJU1RSWSIsIkFDQ0VTU19BTkRfTUFOQUdFX0NETiIsIkFDQ0VTU19BTkRfTUFOQUdFX1ZQTiIsIkFDQ0VTU19BTkRfTUFOQUdFX0FQSV9HQVRFV0FZIiwiQUNDRVNTX0FORF9NQU5BR0VfTkdTIiwiQUNDRVNTX0FORF9NQU5BR0VfS0FBUyIsIkFDQ0VTU19BTkRfTUFOQUdFX05FVFdPUktfRklMRV9TVE9SQUdFIiwiQUNDRVNTX0FORF9NQU5BR0VfQUlfTU9ERUxfSFVCIiwiQ1JFQVRFX05FVFdPUktfU0VDVVJJVFlfR1JPVVBTIiwiQUNDRVNTX0FORF9NQU5BR0VfSUFNX1JFU09VUkNFUyJdLCJ1dWlkIjoiZDIwNjIwMTAtODE3MS00YzIyLTkzY2EtOTFmOTFhMjI0ZmNhIiwicmVzZWxsZXJJZCI6NDY4MzI1MjgsInJlZ0RvbWFpbiI6Imlvbm9zLmNvbSIsInJvbGUiOiJvd25lciIsImNvbnRyYWN0TnVtYmVyIjozNDU0MDMzOSwiaXNQYXJlbnQiOnRydWV9LCJleHAiOjE4MDExNjcxMzd9.0mF5yN_QMgRbWLvQZIc019ggWAIagtzJf8qFiNLn_glyWR5_9odmQo34I2DqH5c8WFD45r6GTXsZxITZWwvNQG8wfbkizrMCdMMJxzhkQTohOqKBGgE0CXEAFWqimBLWDbeeH1YLXZ2qbipNwM2jg1jvih6KGa1MB7bnKCLq9Mz4m-9EOIF1LJUiypcH9ErC1wjCqnSZP4UdaIuZwlZWeUicME1lN-c9PtdOq-sZgIqHLnrk1tQgada4AJZnjwJGkd2127yYDlZGr02tu6FpU8Ucw4fyHCttzfg7O4zVFMWXHszILwXjlwOUl-yR1jlPGfTzrcMcsvGKAXlcc9Nfrg"

headers = {
    "Authorization": f"Bearer {API_TOKEN_VALUE}",
    "Accept": "application/json",
}

delete_url = f"{BASE}/datacenters/{DATACENTER_ID}/servers/{SERVER_ID}"

resp = requests.delete(delete_url, headers=headers, timeout=30)

print("Status:", resp.status_code)

if resp.status_code not in (202, 204):
    print("Body:", resp.text)
    resp.raise_for_status()

print("Delete request accepted.")